<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Textty</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="shortcut icon" type="image/png" href="/img/favicon.png"/>

    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet"
    />
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100vh;
        width: 100%;
      }

      .ql-toolbar {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .ql-editor {
        background: #fefefe;
        color: #34515e;
        height: 100vh;
      }

      #counter {
        position: fixed;
        bottom: 20px;
        right: 20px;
        color: #34515e;
      }
    </style>
  </head>

  <body>
    <div id="editor"></div>
    <div id="counter">Word count: 0</div>
    <script>
      var toolbarOptions = [
        [{ size: ["small", "normal", "large", "huge"] }],
        [{ font: [] }],
        [{ align: [] }],
        [{ color: [] }],
        ["bold", "italic", "underline", "strike"],
        ["blockquote", "code-block"],
        [{ list: "ordered" }, { list: "bullet" }],
        [{ script: "sub" }, { script: "super" }]
      ];

      Quill.register("modules/counter", function(quill, options) {
        var container = document.querySelector(options.container);
        quill.on("text-change", function() {
          var text = quill.getText();
          if (options.unit === "word") {
            container.innerText =
              "Word count: " + (text.split(/\s+/).length - 1);
          } else {
            container.innerText = "Character count:" + text.length;
          }
        });
      });

      let Inline = Quill.import("blots/inline");
      class GrammarlyInline extends Inline {}
      GrammarlyInline.tagName = "G";
      GrammarlyInline.blotName = "grammarly-inline";
      GrammarlyInline.className = "gr_";
      Quill.register(GrammarlyInline);

      var quill = new Quill("#editor", {
        modules: {
          toolbar: toolbarOptions,
          counter: {
            container: "#counter",
            unit: "word"
          }
        },
        placeholder:
          "Textty is a minimal online text editor, it is powered by Quill",
        theme: "snow"
      });

      document.querySelector(".ql-editor").removeAttribute("data-gramm");
    </script>
  </body>
</html>
